<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<link rel="stylesheet" href="style.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/7.14.1-0/firebase.js"></script>
	<script src="https://cdn.rawgit.com/kimmobrunfeldt/progressbar.js/0.6.1/dist/progressbar.js"></script>
	<script src="sweetalert.min.js"></script>
						<link href="https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	
	<script type="text/javascript">
	
	var loggato = sessionStorage.getItem('loggato');
	
	if(loggato != 1) {
		location.href="index.html";
	}
	
	$(function() {
$('#menu > .item-submenu .submenu').click(function(){
    if($('.item-submenu .sub-menu').css('display') == 'none'){
            $('.item-submenu .sub-menu').css({'display':'block'});
    } else {
            $('#menu > .item-submenu .sub-menu').css({'display':'none'}); 
}
});
$('#menuToggle > input').click(function(){
    $('#menu > .item-submenu .sub-menu').css({'display':'none'}); 
	
});


$('#menu > .item-submenu2 .submenu2').click(function(){
    if($('.item-submenu2 .sub-menu2').css('display') == 'none'){
            $('.item-submenu2 .sub-menu2').css({'display':'block'});
    } else {
            $('#menu > .item-submenu2 .sub-menu2').css({'display':'none'}); 
}
});
$('#menuToggle > input').click(function(){
    $('#menu > .item-submenu2 .sub-menu2').css({'display':'none'}); 
});


$('#menu > .item-submenu3 .submenu3').click(function(){
    if($('.item-submenu3 .sub-menu3').css('display') == 'none'){
            $('.item-submenu3 .sub-menu3').css({'display':'block'});
    } else {
            $('#menu > .item-submenu3 .sub-menu3').css({'display':'none'}); 
}
});
$('#menuToggle > input').click(function(){
    $('#menu > .item-submenu3 .sub-menu3').css({'display':'none'}); 
});


});
	
	</script>
	
		<style>
        
        #rowAdder {
            margin-left: 17px;
        }
		
 .center {
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
}
.form-input {
  width:350px;
  padding:20px;
  background:#fff;
  box-shadow: -3px -3px 7px rgba(94, 104, 121, 0.377),
              3px 3px 7px rgba(94, 104, 121, 0.377);
}

.form-input img {
  width:100%;
  display:none;
  margin-bottom:30px;
}
.form-input input {
  display:none;
}
.form-input label {
  display:block;
  width:50%;
  height:45px;
  margin-left: 25%;
  line-height:50px;
  text-align:center;
  background:#1172c2;
  color:#fff;
  font-size:15px;
  font-family:”Open Sans”,sans-serif;
  text-transform:Uppercase;
  font-weight:600;
  border-radius:20px;
  cursor:pointer;
}
    </style>
	
    <title>Modifica dati utente</title>
</head>
<body>
    <div class="nav">
         <div class="logo">
            <img src="titolo.png" id="iconaSito" onclick="home()";><img src="scritta.png" id="scrittaSito" onclick="home()";>
        </div>

				<div class="dropdown" id="b1">
  <button class="dropbtn"><p align="center" style="font-size:min(1.2vw, 17px);">Gestisci utenti</p></button>
  <div class="dropdown-content">
	<a href="inserisci.html"><p align="center" style="font-size:min(1.2vw, 17px);">Inserisci</p></a>
    <a href="listaUtenti.html"><p align="center" style="font-size:min(1.2vw, 17px);" >Modifica</p></a>
    <a href="listaUtentiMonitora.html"><p align="center" style="font-size:min(1.2vw, 17px);">Monitora</p></a>

  </div>
</div>

		<div class="dropdown" id="b2">
  <button class="dropbtn"><p align="center" style="font-size:min(1.2vw, 17px);">Gestisci contenuti</p></button>
  <div class="dropdown-content">
	<a href="listaContenuti.html"><p align="center" style="font-size:min(1.2vw, 17px);">Lista</p></a>
	<a href="inserisciContenuti.html"><p align="center" style="font-size:min(1.2vw, 17px);">Inserisci</p></a>
  </div>
</div>

		<div class="dropdown" id="b3">
  <button class="dropbtn"><p align="center" style="font-size:min(1.2vw, 17px);">
  <script>
					var cognome = sessionStorage.getItem('cognome');  
					var nome = sessionStorage.getItem('nome'); 
					document.write(cognome+" "+nome);
</script></p></button>
  <div class="dropdown-content">
    <a href="modificaDatiAmm.html"><p align="center" style="font-size:min(1.2vw, 17px);">Modifica dati account</p></a>
  </div>
</div>
        
        <img src="logout.png" id="bottoneLogOut" onclick="effettuaLogout()";></img>
		
        
		
    </div>
	
	<div id="menuToggle">
              <!-- checkbox is used as click reciever. -->
              <input type="checkbox" />
          
              <!-- spans to act as a hamburger. -->
              <span></span>
              <span></span>
              <span></span>
              
              <ul id="menu">
			  
                
                <hr>
                <li class="item-submenu">
                 <a href="#" class="submenu">Gestisci utenti</a>
                <ul class="sub-menu">
                    <li><a href="inserisci.html">Inserisci</a></li>
                    <hr>
                    <li><a href="listaUtenti.html">Modifica</a></li>
					<hr>
                    <li><a href="listaUtentiMonitora.html">Monitora</a></li>
                </ul>
                </li>
				
            
                <hr>
				<li class="item-submenu2">
                 <a href="#" class="submenu2">Gestisci contenuti</a>
                <ul class="sub-menu2">
                    <li><a href="listaContenuti.html">Lista</a></li>
                    <hr>
                    <li><a href="inserisciContenuti.html">Inserisci</a></li>
                </ul>
                </li>
				
				<hr>
				<li class="item-submenu3">
                 <a href="#" class="submenu3">Gestisci account</a>
                <ul class="sub-menu3">
                    <li><a href="modificaDatiAmm.html">Modifica dati account</a></li>
                   
                </ul>
                </li>
				
				
              </ul>
            </div>
			
 <br>
 <div class="progressBar" id="progressBar"></div>
 <div class="container" id="container">
        <div class="box form-box">
		<header>Modifica dati utente</header>
 <form action="" id="modificaDati">
		
			<div class="alertPasswordNonValida">Password già utilizzata</div>
			<div class="alertUsernameGiaUsato">Username già utilizzato</div>		
			<div class="alertImmagineGrande">L'immagine deve essere inferiore ai 43kb</div>
			<div class="alertNominativoNumeri">Il nominativo non può contenere numeri</div>
			<div class="alertCodiceStpSpeciali">Il codice Stp non può contenere caratteri speciali</div>
			<div class="alertCodiceNon16">Il codice Stp deve contenere 16 caratteri</div>
			<div class="alertImmagineNonPng">L'immagine non è in formato .png</div>
				
                <div class="field input">
                    <label for="username">Username</label>
                    <input type="text" name="username" id="username" autocomplete="off" required>
                </div>
				
				<div class="field input">
					<label for="username">Nominativo</label>
                    <input type="text" name="nominativo" id="nominativo" autocomplete="off" required>
				</div>
				
				<div class="field input">				
					<label for="username">Codice STP</label>
                    <input type="text" name="stp" id="stp" autocomplete="off"><br>
				</div>

                <div class="field input">
                    <label for="password">Password</label>
					
					<div class="view_item">
				      <div class="vi_left">
					    <img src="" id="password">
					  </div>
                    </div>					  
					<br>

					<div class="field2">
					  <div class="form-input">
					  <img id="file-ip-1-preview" name="file-ip-1-preview" class="file-ip-1-preview" src=""  ></img>
					  <label for="file-ip-1">Carica immagine</label>
					 <input type="file" name="file-ip-1" id="file-ip-1" accept="image/png" onchange="showPreview(event);">
					  </div>
					</div>
					
					
					
					
					
                </div>

                <div class="field">
                    
                     <center><input type="button" onclick="annulla()" class="btn" style="background-color:red" value="Esci">&nbsp <button type="submit" class="btn">Salva</button></center>
                </div>
                
            </form>
 
            </div>
          </div>
		  
       

    
	
    
<script src="modificaDatiUtente.js"></script>
<script type="text/javascript">

document.getElementById("container").style.display = "none";

var bar = new ProgressBar.Circle(progressBar, {
  strokeWidth: 3,
  easing: 'easeInOut',
  duration: 1400,
  color: '#008000',
  trailColor: '#eee',
  trailWidth: 1,
  svgStyle: null
});

bar.animate(1.0);  // Number from 0.0 to 1.0


function showPreview(event){

var fileName = document.getElementById("file-ip-1").value;

var imgpath=document.getElementById('file-ip-1');

var numeroElementi = document.getElementsByName("file-ip-1-preview").length;
var img=imgpath.files[0].size;
var imgsize=img/1024; 

if(numeroElementi == 0) {

document.querySelector(".alertPasswordNonInserita").style.display = "block";
	   
			   //   remove the alert
				  setTimeout(() => {
					document.querySelector(".alertPasswordNonInserita").style.display = "none";
				  }, 3000);

}
else {


if((fileName.split(".")[1].toUpperCase() == "PNG") && (imgsize <= 42)){

  if(event.target.files.length > 0){

    var src = URL.createObjectURL(event.target.files[0]);
	
	var elems = document.getElementById('password');
	
		elems.src = src;
	    elems.style.display = 'block';
		
  }
  sessionStorage.setItem('immagineUtenteModifica', 1);
  }
  
  else if(imgsize > 42) {

         document.querySelector(".alertImmagineGrande").style.display = "block";
	   
			   //   remove the alert
				  setTimeout(() => {
					document.querySelector(".alertImmagineGrande").style.display = "none";
				  }, 3000);
				 sessionStorage.setItem('immagineUtenteModifica', 0);
}
  else {
 document.querySelector(".alertImmagineNonPng").style.display = "block";
	   
			   //   remove the alert
				  setTimeout(() => {
					document.querySelector(".alertImmagineNonPng").style.display = "none";
				  }, 3000);
				  sessionStorage.setItem('immagineUtenteModifica', 3); //immagine non png
				  
 }
 }
}

function annulla() {

 location.href="home.html";

}

	function home() {
	   location.href="home.html";
	}

</script>
</body>

</html>